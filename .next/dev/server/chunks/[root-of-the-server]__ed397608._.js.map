{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///home/badquant/EIS/warehouse-api-server-EIS/lib/db.ts"],"sourcesContent":["import Database from \"better-sqlite3\"\nimport path from \"path\"\n\nlet db: Database.Database | null = null\n\nexport function getDatabase() {\n  if (!db) {\n    const dbPath = path.join(process.cwd(), \"warehouse.db\")\n    db = new Database(dbPath)\n    db.pragma(\"journal_mode = WAL\")\n  }\n  return db\n}\n\nexport function initializeDatabase() {\n  const database = getDatabase()\n  const initSql = `\n    -- Items table\n    CREATE TABLE IF NOT EXISTS items (\n      id TEXT PRIMARY KEY,\n      name TEXT NOT NULL,\n      category TEXT NOT NULL,\n      sku TEXT UNIQUE NOT NULL,\n      unit_cost DECIMAL(10, 2),\n      reorder_point INTEGER,\n      reorder_quantity INTEGER,\n      created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n    );\n\n    -- Warehouses table\n    CREATE TABLE IF NOT EXISTS warehouses (\n      id TEXT PRIMARY KEY,\n      name TEXT NOT NULL,\n      address TEXT NOT NULL,\n      total_capacity INTEGER,\n      used_capacity INTEGER DEFAULT 0,\n      created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n    );\n\n    -- Storage locations table\n    CREATE TABLE IF NOT EXISTS storage_locations (\n      id TEXT PRIMARY KEY,\n      warehouse_id TEXT NOT NULL,\n      capacity INTEGER,\n      used_space INTEGER DEFAULT 0,\n      created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n      FOREIGN KEY (warehouse_id) REFERENCES warehouses(id)\n    );\n\n    -- Inventory records table\n    CREATE TABLE IF NOT EXISTS inventory_records (\n      id TEXT PRIMARY KEY,\n      item_id TEXT NOT NULL,\n      warehouse_id TEXT NOT NULL,\n      location_id TEXT NOT NULL,\n      quantity_on_hand INTEGER,\n      last_updated DATETIME DEFAULT CURRENT_TIMESTAMP,\n      FOREIGN KEY (item_id) REFERENCES items(id),\n      FOREIGN KEY (warehouse_id) REFERENCES warehouses(id),\n      FOREIGN KEY (location_id) REFERENCES storage_locations(id)\n    );\n\n    -- Purchase requisitions table\n    CREATE TABLE IF NOT EXISTS purchase_requisitions (\n      id TEXT PRIMARY KEY,\n      item_id TEXT NOT NULL,\n      item_name TEXT NOT NULL,\n      quantity INTEGER NOT NULL,\n      status TEXT DEFAULT 'PENDING',\n      created_by TEXT,\n      justification TEXT,\n      created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n      FOREIGN KEY (item_id) REFERENCES items(id)\n    );\n\n    -- Purchase orders table\n    CREATE TABLE IF NOT EXISTS purchase_orders (\n      id TEXT PRIMARY KEY,\n      requisition_id TEXT NOT NULL,\n      supplier_id TEXT,\n      supplier_name TEXT,\n      total_amount DECIMAL(12, 2),\n      order_date DATETIME,\n      status TEXT DEFAULT 'CREATED',\n      created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n      FOREIGN KEY (requisition_id) REFERENCES purchase_requisitions(id)\n    );\n\n    -- Pick lists table\n    CREATE TABLE IF NOT EXISTS pick_lists (\n      id TEXT PRIMARY KEY,\n      order_id TEXT NOT NULL,\n      status TEXT DEFAULT 'PENDING',\n      created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n    );\n\n    -- Pick list items table\n    CREATE TABLE IF NOT EXISTS pick_list_items (\n      id TEXT PRIMARY KEY,\n      pick_list_id TEXT NOT NULL,\n      item_id TEXT NOT NULL,\n      quantity_required INTEGER,\n      quantity_picked INTEGER DEFAULT 0,\n      FOREIGN KEY (pick_list_id) REFERENCES pick_lists(id),\n      FOREIGN KEY (item_id) REFERENCES items(id)\n    );\n\n    -- Packages table\n    CREATE TABLE IF NOT EXISTS packages (\n      id TEXT PRIMARY KEY,\n      order_id TEXT NOT NULL,\n      pick_list_id TEXT NOT NULL,\n      package_type TEXT,\n      status TEXT DEFAULT 'PACKING',\n      created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n    );\n\n    -- Orders table\n    CREATE TABLE IF NOT EXISTS orders (\n      id TEXT PRIMARY KEY,\n      item_id TEXT NOT NULL,\n      item_name TEXT NOT NULL,\n      quantity INTEGER NOT NULL,\n      unit_cost DECIMAL(10, 2),\n      total_cost DECIMAL(12, 2),\n      status TEXT DEFAULT 'ORDERED',\n      ordered_date DATETIME DEFAULT CURRENT_TIMESTAMP,\n      delivery_date DATETIME,\n      created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n      FOREIGN KEY (item_id) REFERENCES items(id)\n    );\n  `\n\n  // Split and execute each statement\n  const statements = initSql.split(\";\").filter((s) => s.trim())\n  for (const stmt of statements) {\n    if (stmt.trim()) {\n      database.exec(stmt)\n    }\n  }\n\n  // Seed dummy data\n  seedDummyData(database)\n}\n\nfunction seedDummyData(database: Database.Database) {\n  // Check if data already exists\n  const itemCount = database.prepare(\"SELECT COUNT(*) as count FROM items\").get() as { count: number }\n  if (itemCount.count > 0) return\n\n  // Insert items\n  const insertItem = database.prepare(`\n    INSERT INTO items (id, name, category, sku, unit_cost, reorder_point, reorder_quantity)\n    VALUES (?, ?, ?, ?, ?, ?, ?)\n  `)\n\n  const items = [\n    [\"ITEM-001\", \"Laptops\", \"Electronics\", \"SKU-LAPTOP-001\", 1200.0, 5, 10],\n    [\"ITEM-002\", \"Desktop Monitors\", \"Electronics\", \"SKU-MONITOR-001\", 350.0, 10, 20],\n    [\"ITEM-003\", \"Keyboards\", \"Accessories\", \"SKU-KEYBOARD-001\", 85.0, 20, 50],\n    [\"ITEM-004\", \"Mice\", \"Accessories\", \"SKU-MOUSE-001\", 45.0, 30, 100],\n    [\"ITEM-005\", \"USB Cables\", \"Accessories\", \"SKU-USB-CABLE-001\", 12.0, 50, 200],\n    [\"ITEM-006\", \"Headphones\", \"Audio\", \"SKU-HEADPHONE-001\", 120.0, 8, 15],\n    [\"ITEM-007\", \"Webcams\", \"Electronics\", \"SKU-WEBCAM-001\", 95.0, 5, 12],\n    [\"ITEM-008\", \"External Hard Drives\", \"Storage\", \"SKU-HDD-EXTERNAL-001\", 150.0, 10, 25],\n    [\"ITEM-009\", \"SSD Storage\", \"Storage\", \"SKU-SSD-001\", 180.0, 8, 20],\n    [\"ITEM-010\", \"Power Banks\", \"Accessories\", \"SKU-POWERBANK-001\", 65.0, 15, 40],\n  ]\n\n  items.forEach((item) => insertItem.run(...item))\n\n  // Insert warehouses\n  const insertWarehouse = database.prepare(`\n    INSERT INTO warehouses (id, name, address, total_capacity, used_capacity)\n    VALUES (?, ?, ?, ?, ?)\n  `)\n\n  insertWarehouse.run(\"WH-1\", \"Main Warehouse\", \"123 Main St, Anytown, USA\", 10000, 4500)\n  insertWarehouse.run(\"WH-2\", \"Secondary Warehouse\", \"456 Oak Ave, Somewhere, USA\", 8000, 3200)\n\n  // Insert storage locations\n  const insertLocation = database.prepare(`\n    INSERT INTO storage_locations (id, warehouse_id, capacity, used_space)\n    VALUES (?, ?, ?, ?)\n  `)\n\n  const locations = [\n    [\"LOC-WH1-001\", \"WH-1\", 500, 350],\n    [\"LOC-WH1-002\", \"WH-1\", 500, 280],\n    [\"LOC-WH1-003\", \"WH-1\", 500, 400],\n    [\"LOC-WH2-001\", \"WH-2\", 400, 200],\n    [\"LOC-WH2-002\", \"WH-2\", 400, 300],\n  ]\n\n  locations.forEach((loc) => insertLocation.run(...loc))\n\n  // Insert inventory records\n  const insertInventory = database.prepare(`\n    INSERT INTO inventory_records (id, item_id, warehouse_id, location_id, quantity_on_hand)\n    VALUES (?, ?, ?, ?, ?)\n  `)\n\n  const inventory = [\n    [\"INV-001\", \"ITEM-001\", \"WH-1\", \"LOC-WH1-001\", 25],\n    [\"INV-002\", \"ITEM-002\", \"WH-1\", \"LOC-WH1-002\", 45],\n    [\"INV-003\", \"ITEM-003\", \"WH-1\", \"LOC-WH1-003\", 8],\n    [\"INV-004\", \"ITEM-004\", \"WH-2\", \"LOC-WH2-001\", 12],\n    [\"INV-005\", \"ITEM-005\", \"WH-2\", \"LOC-WH2-002\", 150],\n    [\"INV-006\", \"ITEM-006\", \"WH-1\", \"LOC-WH1-001\", 5],\n    [\"INV-007\", \"ITEM-007\", \"WH-2\", \"LOC-WH2-001\", 18],\n    [\"INV-008\", \"ITEM-008\", \"WH-1\", \"LOC-WH1-002\", 22],\n    [\"INV-009\", \"ITEM-009\", \"WH-2\", \"LOC-WH2-002\", 9],\n    [\"INV-010\", \"ITEM-010\", \"WH-1\", \"LOC-WH1-003\", 32],\n  ]\n\n  inventory.forEach((inv) => insertInventory.run(...inv))\n\n  // Insert purchase requisitions\n  const insertRequisition = database.prepare(`\n    INSERT INTO purchase_requisitions (id, item_id, item_name, quantity, status, created_by, justification)\n    VALUES (?, ?, ?, ?, ?, ?, ?)\n  `)\n\n  insertRequisition.run(\"REQ-001\", \"ITEM-001\", \"Laptops\", 5, \"PENDING\", \"SYSTEM\", \"Stock level below reorder point\")\n  insertRequisition.run(\"REQ-002\", \"ITEM-003\", \"Keyboards\", 8, \"PENDING\", \"WAREHOUSE_MANAGER\", \"Inventory restocking\")\n  insertRequisition.run(\"REQ-003\", \"ITEM-006\", \"Headphones\", 3, \"APPROVED\", \"PROCUREMENT\", \"Approved for purchase\")\n  insertRequisition.run(\"REQ-004\", \"ITEM-004\", \"Mice\", 12, \"REJECTED\", \"WAREHOUSE_MANAGER\", \"Cancelled order\")\n\n  // Insert purchase orders\n  const insertPO = database.prepare(`\n    INSERT INTO purchase_orders (id, requisition_id, supplier_id, supplier_name, total_amount, order_date, status)\n    VALUES (?, ?, ?, ?, ?, ?, ?)\n  `)\n\n  insertPO.run(\"PO-001\", \"REQ-003\", \"SUP-001\", \"TechSupply Co\", 360.0, new Date().toISOString(), \"CREATED\")\n  insertPO.run(\"PO-002\", \"REQ-001\", \"SUP-002\", \"ElectroWorld\", 6000.0, new Date().toISOString(), \"CREATED\")\n\n  // Insert pick lists\n  const insertPickList = database.prepare(`\n    INSERT INTO pick_lists (id, order_id, status)\n    VALUES (?, ?, ?)\n  `)\n\n  insertPickList.run(\"PL-001\", \"ORD-001\", \"PENDING\")\n  insertPickList.run(\"PL-002\", \"ORD-002\", \"ASSIGNED\")\n  insertPickList.run(\"PL-003\", \"ORD-003\", \"COMPLETED\")\n\n  // Insert pick list items\n  const insertPickListItem = database.prepare(`\n    INSERT INTO pick_list_items (id, pick_list_id, item_id, quantity_required, quantity_picked)\n    VALUES (?, ?, ?, ?, ?)\n  `)\n\n  insertPickListItem.run(\"PLI-001\", \"PL-001\", \"ITEM-001\", 3, 0)\n  insertPickListItem.run(\"PLI-002\", \"PL-001\", \"ITEM-003\", 5, 0)\n  insertPickListItem.run(\"PLI-003\", \"PL-002\", \"ITEM-002\", 2, 2)\n  insertPickListItem.run(\"PLI-004\", \"PL-002\", \"ITEM-005\", 10, 8)\n  insertPickListItem.run(\"PLI-005\", \"PL-003\", \"ITEM-006\", 1, 1)\n  insertPickListItem.run(\"PLI-006\", \"PL-003\", \"ITEM-008\", 3, 3)\n\n  // Insert packages\n  const insertPackage = database.prepare(`\n    INSERT INTO packages (id, order_id, pick_list_id, package_type, status)\n    VALUES (?, ?, ?, ?, ?)\n  `)\n\n  insertPackage.run(\"PKG-001\", \"ORD-001\", \"PL-001\", \"BOX\", \"PACKING\")\n  insertPackage.run(\"PKG-002\", \"ORD-002\", \"PL-002\", \"BOX\", \"LABELED\")\n  insertPackage.run(\"PKG-003\", \"ORD-003\", \"PL-003\", \"CRATE\", \"VERIFIED\")\n\n  // Insert sample orders\n  const insertOrder = database.prepare(`\n    INSERT INTO orders (id, item_id, item_name, quantity, unit_cost, total_cost, status, ordered_date, delivery_date)\n    VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)\n  `)\n\n  const now = new Date()\n  const deliveryDate = new Date(now.getTime() + 7 * 24 * 60 * 60 * 1000)\n\n  insertOrder.run(\n    \"ORD-BUY-001\",\n    \"ITEM-001\",\n    \"Laptops\",\n    10,\n    1200.0,\n    12000.0,\n    \"DELIVERED\",\n    now.toISOString(),\n    deliveryDate.toISOString(),\n  )\n  insertOrder.run(\n    \"ORD-BUY-002\",\n    \"ITEM-005\",\n    \"USB Cables\",\n    100,\n    12.0,\n    1200.0,\n    \"IN_TRANSIT\",\n    now.toISOString(),\n    deliveryDate.toISOString(),\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 487, "column": 0}, "map": {"version":3,"sources":["file:///home/badquant/EIS/warehouse-api-server-EIS/app/api/requisitions/route.ts"],"sourcesContent":["import { getDatabase } from \"@/lib/db\"\nimport { NextResponse } from \"next/server\"\n\nexport async function GET() {\n  try {\n    const db = getDatabase()\n\n    const requisitions = db\n      .prepare(`\n      SELECT * FROM purchase_requisitions ORDER BY created_at DESC\n    `)\n      .all()\n\n    return NextResponse.json(requisitions)\n  } catch (error) {\n    console.error(\"[v0] Requisitions API error:\", error)\n    return NextResponse.json({ error: \"Failed to fetch requisitions\" }, { status: 500 })\n  }\n}\n\nexport async function POST(request: Request) {\n  try {\n    const db = getDatabase()\n    const body = await request.json()\n    const { itemId, quantity, justification, createdBy } = body\n\n    const item = db.prepare(\"SELECT name FROM items WHERE id = ?\").get(itemId) as { name: string } | undefined\n    if (!item) {\n      return NextResponse.json({ error: \"Item not found\" }, { status: 404 })\n    }\n\n    const id = `REQ-${Date.now()}`\n    db.prepare(`\n      INSERT INTO purchase_requisitions (id, item_id, item_name, quantity, justification, created_by)\n      VALUES (?, ?, ?, ?, ?, ?)\n    `).run(id, itemId, item.name, quantity, justification, createdBy)\n\n    return NextResponse.json({ id, message: \"Requisition created\" }, { status: 201 })\n  } catch (error) {\n    console.error(\"[v0] Create requisition error:\", error)\n    return NextResponse.json({ error: \"Failed to create requisition\" }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,KAAK,IAAA,0HAAW;QAEtB,MAAM,eAAe,GAClB,OAAO,CAAC,CAAC;;IAEZ,CAAC,EACE,GAAG;QAEN,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,gCAAgC;QAC9C,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA+B,GAAG;YAAE,QAAQ;QAAI;IACpF;AACF;AAEO,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,KAAK,IAAA,0HAAW;QACtB,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,aAAa,EAAE,SAAS,EAAE,GAAG;QAEvD,MAAM,OAAO,GAAG,OAAO,CAAC,uCAAuC,GAAG,CAAC;QACnE,IAAI,CAAC,MAAM;YACT,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAiB,GAAG;gBAAE,QAAQ;YAAI;QACtE;QAEA,MAAM,KAAK,CAAC,IAAI,EAAE,KAAK,GAAG,IAAI;QAC9B,GAAG,OAAO,CAAC,CAAC;;;IAGZ,CAAC,EAAE,GAAG,CAAC,IAAI,QAAQ,KAAK,IAAI,EAAE,UAAU,eAAe;QAEvD,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE;YAAI,SAAS;QAAsB,GAAG;YAAE,QAAQ;QAAI;IACjF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kCAAkC;QAChD,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA+B,GAAG;YAAE,QAAQ;QAAI;IACpF;AACF"}}]
}